@using LinkClanBot3.Data
@using Microsoft.EntityFrameworkCore;
@inject LinkClanBot3Context DBContext
@inject IDialogService DialogService

<MudText Class="flex-column text-end">@getElapsedDays()</MudText>

@code {
	[Parameter]
	public int MonthsAgo { get; set; } = 0;
	[Parameter]
	[EditorRequired]
	public string MemberId { get; set; } = "";

	private string getElapsedDays()
	{
		var member = DBContext.Member.Include(e => e.MemberTimeLine).FirstOrDefault(e => e.MemberID == MemberId);
		var days = member?.ElapsedDays() ?? Member.MaxDisplayDay;
		return days < Member.MaxDisplayDay ? $"{days}日" : $"{days}日以上" ;
	}
}
